/*Guilherme do Carmo Novaes NoUSP:5916400*/
/*EP8     -    Disk-MAG*/
#include<stdio.h>
#include<stdlib.h>

/*Declaração da Função que calcula o F ,D, I , conforme coeficientes dados*/
float calcula(float X, float Y, float T, float *C);

int main(){

 float X=0.0,Y=0.0,T=0.0,I=0.0,D=0.0,F=0.0,
       CI[]={-10.006583388,1.689987698,-0.774009842,-0.285142172,-0.019128983,-0.009799375,-0.009567729,0.011464555,-0.002605504,-0.002096450,0.000312138,-0.000219761,0.000242536,0.000496757,-0.000091865,0.000053931,-0.000405449,0.000154646,-0.000008095,0.000006410,-0.000010497,0.000004395,0.000012169,-0.000004039,0.000003870,0.000004229,0.000006854,0.000002329,0.000000852,-0.000004956,0.000002066},
	   CD[]={-13.990855321,-0.178276825,-0.737983503,-0.160172410,0.009037327,0.012042122,0.003918684,0.005522720,.000274259,0.000315750,0.000251143,0.000150791,0.000184300,0.000099212,0.000162457,0.000047993,-0.000059871,0.000100456,0.000002292,-0.000002239,-0.000005053,-0.000003229,0.000000395,-0.000000564,0.000001007,-0.000002915,-0.000000630,-0.000000021,0.000000906,0.000000163,0.000001464},
       CF[]={24224.659636207,183.996795632,-35.021288453,-37.400009238,3.361550943,-2.981093399,1.003467787,8.095907512,-1.375229967,0.254272806,0.012792782,-0.144525770,0.036415624,-0.144366979,0.009647616,0.001985112,-0.016962150,-0.052733877,0.016506825,-0.000018715,0.003236118,-0.000039060,0.000779251,0.002273586,0.000208493,0.000610764,-0.000407288,0.000612531,0.000483826,-0.000656300,0.000567275};

 //Pede a entreada dos dados
 printf("Entre com o ano a ser calculado: ");
 scanf("%f",&T);
 T = T - 1990;

 printf("\nEntre com a Latitude a ser calculado: ");
 scanf("%f",&Y);
 Y = Y + 15;

 printf("\nEntre com a Longitude a ser calculado: ");
 scanf("%f",&X);
 X = X + 55;

 //Calcula Inclinação, Declinacao e Campo Total
 I = calcula(X,Y,T,CI);
 D = calcula(X,Y,T,CD);
 F = calcula(X,Y,T,CF);

 //Imprime resultado
 printf("\nI = %f\nD = %f\nF = %f\n\n",I,D,F);
 system("pause");

return 0;
}


//Funcao que calcula I, D e F
float calcula(float X, float Y, float T, float *C){
 float  P1=0,P2=0,P3=0,P4=0,P5=0,P6=0,P7=0,RES=0;
 P1  = C[0]+C[1]*Y+C[2]*X+C[3]*T+C[4]*X*X+C[5]*X*Y+C[6]*X*T+C[7]*Y*Y;
 P2  = C[8]*Y*T+C[9]*T*T+C[10]*X*X*X+C[11]*X*X*Y+C[12]*X*X*T;
 P3  = C[13]*X*Y*Y+C[14]*X*Y*T+C[15]*X*T*T+C[16]*Y*Y*Y+C[17]*Y*Y*T;
 P4  = C[18]*Y*T*T+C[19]*X*X*X*X+C[20]*X*X*X*Y+C[21]*X*X*X*T;
 P5  = C[22]*X*X*Y*Y+C[23]*X*X*Y*T+C[24]*X*X*T*T+C[25]*X*Y*Y*Y;
 P6  = C[26]*X*Y*Y*T+C[27]*Y*Y*Y*T+C[28]*X*Y*T*T;
 P7  = C[29]*Y*Y*Y*Y+C[30]*Y*Y*T*T;
 RES = P1 + P2 + P3 + P4 + P5 + P6 + P7;

 return RES;
}
